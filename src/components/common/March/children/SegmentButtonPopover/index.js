import React, { useState } from 'react'
import PropTypes from 'prop-types'
import { Popover } from 'antd'
import { MARCH_TYPES } from '../../../../../constants/March'

const { BY_RAILROAD, BY_SHIPS } = MARCH_TYPES

// TODO винести в svg файли
const getTruckIcon = (isSelected) => `url("data:image/svg+xml;charset=UTF-8,%3csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill='${isSelected ? 'white' : '%23757575'}' d='M19.652 10.0154V8.295C19.652 8.28768 19.6511 8.28038 19.6494 8.27326V2.6813C19.6494 2.63916 19.6327 2.59874 19.6029 2.56894C19.5731 2.53913 19.5327 2.52239 19.4905 2.52239H17.7731L18.2433 8.20587H17.152L17.0542 7.02413L16.6827 2.52174L16.5651 1.09565C16.5649 0.805083 16.4494 0.526467 16.2439 0.321024C16.0384 0.11558 15.7598 0.000115725 15.4692 5.39986e-07H4.53049C4.38656 -0.00014241 4.24401 0.0280983 4.111 0.0831067C3.97799 0.138115 3.85714 0.218811 3.75535 0.320578C3.65356 0.422344 3.57284 0.543183 3.51781 0.676179C3.46277 0.809176 3.4345 0.951719 3.43462 1.09565L3.31701 2.52174L2.84766 8.20587H1.75679L2.22701 2.52174H0.509613C0.488744 2.52174 0.46808 2.52585 0.4488 2.53384C0.42952 2.54182 0.412001 2.55353 0.397245 2.56828C0.382488 2.58304 0.370783 2.60056 0.362797 2.61984C0.35481 2.63912 0.3507 2.65978 0.3507 2.68065V8.27413C0.348992 8.28125 0.348116 8.28855 0.348091 8.29587V10.0163C0.348137 10.0357 0.354534 10.0546 0.366308 10.0701C0.378081 10.0856 0.394586 10.0967 0.413309 10.102L1.21418 11.0328C0.98513 11.0521 0.770945 11.1542 0.611639 11.3199C0.452334 11.4856 0.358805 11.7036 0.348526 11.9333H1.98853L2.50353 12.532H0.430048C0.408346 12.532 0.38752 12.5405 0.372094 12.5558C0.356667 12.571 0.347886 12.5918 0.347657 12.6135V14.0737C0.347628 14.0845 0.349739 14.0953 0.35387 14.1053C0.358 14.1153 0.364068 14.1244 0.371725 14.132C0.379381 14.1397 0.388475 14.1457 0.398484 14.1499C0.408493 14.154 0.41922 14.1561 0.430048 14.1561H4.10266C4.19395 14.2862 4.31526 14.3923 4.45631 14.4655C4.59736 14.5387 4.75398 14.5768 4.91288 14.5765H8.28897C8.22045 14.7014 8.16585 14.8334 8.12615 14.9702H0.415048C0.401466 14.9703 0.388224 14.9745 0.377081 14.9822C0.365937 14.99 0.357419 15.001 0.352657 15.0137H0.347657V19.055C0.347887 19.3057 0.447673 19.5461 0.62508 19.7233C0.802487 19.9005 1.043 20.0001 1.29375 20H2.52853C2.65278 20 2.77582 19.9756 2.89062 19.928C3.00541 19.8805 3.10972 19.8108 3.19758 19.723C3.28544 19.6351 3.35512 19.5308 3.40266 19.416C3.4502 19.3012 3.47465 19.1782 3.47462 19.0539V16.0583H8.12506C8.24307 16.4642 8.48964 16.8209 8.82771 17.0747C9.16579 17.3284 9.57711 17.4657 9.99985 17.4657C10.4226 17.4657 10.8339 17.3284 11.172 17.0747C11.5101 16.8209 11.7566 16.4642 11.8746 16.0583H16.5251V19.0539C16.525 19.1782 16.5495 19.3012 16.597 19.416C16.6446 19.5308 16.7143 19.6351 16.8021 19.723C16.89 19.8108 16.9943 19.8805 17.1091 19.928C17.2239 19.9756 17.3469 20 17.4712 20H18.7059C18.8302 20 18.9532 19.9756 19.068 19.928C19.1828 19.8805 19.2871 19.8108 19.375 19.723C19.4629 19.6351 19.5325 19.5308 19.5801 19.416C19.6276 19.3012 19.6521 19.1782 19.652 19.0539V15.0126H19.647C19.6423 14.9999 19.6338 14.9889 19.6226 14.9812C19.6115 14.9734 19.5982 14.9692 19.5846 14.9691H11.8746C11.8349 14.8323 11.7803 14.7003 11.7118 14.5754H15.0879C15.2466 14.5755 15.403 14.5373 15.5439 14.4641C15.6847 14.391 15.8059 14.2849 15.897 14.155H19.5696C19.5805 14.155 19.5912 14.1529 19.6012 14.1488C19.6112 14.1447 19.6203 14.1386 19.628 14.1309C19.6356 14.1233 19.6417 14.1142 19.6458 14.1042C19.65 14.0942 19.6521 14.0834 19.652 14.0726V12.6135C19.652 12.5916 19.6434 12.5707 19.6279 12.5552C19.6125 12.5398 19.5915 12.5311 19.5696 12.5311H17.4959L18.011 11.9324H19.652C19.6418 11.7028 19.5482 11.4847 19.3889 11.319C19.2296 11.1533 19.0154 11.0513 18.7864 11.032L19.5868 10.1011C19.6055 10.0959 19.622 10.0847 19.6338 10.0692C19.6456 10.0538 19.652 10.0349 19.652 10.0154ZM3.50614 11.8824C3.31266 11.8824 3.12352 11.825 2.96265 11.7175C2.80177 11.61 2.67639 11.4572 2.60234 11.2785C2.5283 11.0997 2.50893 10.903 2.54667 10.7133C2.58442 10.5235 2.67759 10.3492 2.8144 10.2124C2.95122 10.0756 3.12553 9.98241 3.31529 9.94467C3.50506 9.90692 3.70175 9.92629 3.88051 10.0003C4.05926 10.0744 4.21204 10.1998 4.31954 10.3606C4.42703 10.5215 4.4844 10.7107 4.4844 10.9041C4.4844 11.1636 4.38134 11.4124 4.19788 11.5959C4.01442 11.7793 3.76559 11.8824 3.50614 11.8824ZM4.74875 3.81848C4.69241 3.81851 4.63661 3.80743 4.58455 3.78589C4.53248 3.76435 4.48517 3.73276 4.44532 3.69293C4.40547 3.6531 4.37386 3.60581 4.35229 3.55375C4.33072 3.5017 4.31962 3.44591 4.31962 3.38957V1.29152C4.31962 1.23518 4.33072 1.17939 4.35229 1.12733C4.37386 1.07528 4.40547 1.02799 4.44532 0.988158C4.48517 0.948327 4.53248 0.916738 4.58455 0.895196C4.63661 0.873654 4.69241 0.862581 4.74875 0.862609H9.10659C9.16293 0.862581 9.21873 0.873654 9.27079 0.895196C9.32285 0.916738 9.37016 0.948327 9.41001 0.988158C9.44987 1.02799 9.48148 1.07528 9.50305 1.12733C9.52462 1.17939 9.53572 1.23518 9.53572 1.29152V3.38957C9.53572 3.44591 9.52462 3.5017 9.50305 3.55375C9.48148 3.60581 9.44987 3.6531 9.41001 3.69293C9.37016 3.73276 9.32285 3.76435 9.27079 3.78589C9.21873 3.80743 9.16293 3.81851 9.10659 3.81848H4.74875ZM7.88637 11.5291C7.88637 11.6529 7.83719 11.7716 7.74966 11.8592C7.66213 11.9467 7.54341 11.9959 7.41963 11.9959H7.34202C7.28073 11.9959 7.22005 11.9838 7.16344 11.9603C7.10682 11.9369 7.05538 11.9025 7.01206 11.8592C6.96874 11.8158 6.93438 11.7644 6.91094 11.7077C6.88751 11.6511 6.87547 11.5904 6.87549 11.5291V8.09174C6.87549 7.96801 6.92465 7.84935 7.01214 7.76186C7.09963 7.67437 7.21829 7.62522 7.34202 7.62522H7.41963C7.54338 7.62522 7.66206 7.67436 7.74958 7.76185C7.83711 7.84933 7.88631 7.96799 7.88637 8.09174V11.5291ZM9.63224 11.5291C9.63227 11.5904 9.62022 11.6511 9.59679 11.7077C9.57336 11.7644 9.539 11.8158 9.49567 11.8592C9.45235 11.9025 9.40091 11.9369 9.3443 11.9603C9.28768 11.9838 9.227 11.9959 9.16572 11.9959H9.08811C8.96432 11.9959 8.8456 11.9467 8.75807 11.8592C8.67054 11.7716 8.62137 11.6529 8.62137 11.5291V8.09174C8.62137 8.03046 8.63344 7.96977 8.6569 7.91316C8.68036 7.85654 8.71474 7.80511 8.75809 7.76178C8.80143 7.71846 8.85288 7.6841 8.90951 7.66067C8.96614 7.63724 9.02682 7.62519 9.08811 7.62522H9.16572C9.28944 7.62522 9.40811 7.67437 9.4956 7.76186C9.58309 7.84935 9.63224 7.96801 9.63224 8.09174V11.5291ZM11.3783 11.5291C11.3783 11.6529 11.3292 11.7716 11.2416 11.8592C11.1541 11.9467 11.0354 11.9959 10.9116 11.9959H10.834C10.7727 11.9959 10.712 11.9838 10.6554 11.9603C10.5988 11.9369 10.5473 11.9025 10.504 11.8592C10.4607 11.8158 10.4263 11.7644 10.4029 11.7077C10.3795 11.6511 10.3674 11.5904 10.3675 11.5291V8.09174C10.3675 7.96801 10.4166 7.84935 10.5041 7.76186C10.5916 7.67437 10.7102 7.62522 10.834 7.62522H10.9116C10.9729 7.62519 11.0336 7.63724 11.0902 7.66067C11.1468 7.6841 11.1983 7.71846 11.2416 7.76178C11.285 7.80511 11.3193 7.85654 11.3428 7.91316C11.3663 7.96977 11.3783 8.03046 11.3783 8.09174V11.5291ZM13.1242 11.5291C13.1242 11.5904 13.1122 11.6511 13.0888 11.7077C13.0653 11.7644 13.031 11.8158 12.9876 11.8592C12.9443 11.9025 12.8929 11.9369 12.8363 11.9603C12.7796 11.9838 12.719 11.9959 12.6577 11.9959H12.5801C12.4563 11.9959 12.3376 11.9467 12.25 11.8592C12.1625 11.7716 12.1133 11.6529 12.1133 11.5291V8.09174C12.1134 7.96799 12.1626 7.84933 12.2501 7.76185C12.3376 7.67436 12.4563 7.62522 12.5801 7.62522H12.6577C12.7814 7.62522 12.9001 7.67437 12.9876 7.76186C13.075 7.84935 13.1242 7.96801 13.1242 8.09174V11.5291ZM14.9429 8.20587V12.5348H14.1086V7.50131C14.1086 7.32834 14.0398 7.16246 13.9175 7.04015C13.7952 6.91784 13.6293 6.84913 13.4564 6.84913H6.54332C6.37035 6.84913 6.20447 6.91784 6.08216 7.04015C5.95986 7.16246 5.89114 7.32834 5.89114 7.50131V12.5348H5.0568V6.98348C5.0568 6.75286 5.14841 6.53168 5.31149 6.3686C5.47456 6.20553 5.69574 6.11391 5.92636 6.11391H14.0725C14.3031 6.11391 14.5243 6.20553 14.6873 6.3686C14.8504 6.53168 14.942 6.75286 14.942 6.98348L14.9429 8.20587ZM10.8931 3.81848C10.8368 3.81851 10.781 3.80743 10.7289 3.78589C10.6768 3.76435 10.6295 3.73276 10.5897 3.69293C10.5498 3.6531 10.5182 3.60581 10.4966 3.55375C10.4751 3.5017 10.464 3.44591 10.464 3.38957V1.29152C10.464 1.23518 10.4751 1.17939 10.4966 1.12733C10.5182 1.07528 10.5498 1.02799 10.5897 0.988158C10.6295 0.948327 10.6768 0.916738 10.7289 0.895196C10.781 0.873654 10.8368 0.862581 10.8931 0.862609H15.2509C15.3073 0.862581 15.3631 0.873654 15.4151 0.895196C15.4672 0.916738 15.5145 0.948327 15.5544 0.988158C15.5942 1.02799 15.6258 1.07528 15.6474 1.12733C15.669 1.17939 15.6801 1.23518 15.6801 1.29152V3.38957C15.6801 3.44591 15.669 3.5017 15.6474 3.55375C15.6258 3.60581 15.5942 3.6531 15.5544 3.69293C15.5145 3.73276 15.4672 3.76435 15.4151 3.78589C15.3631 3.80743 15.3073 3.81851 15.2509 3.81848H10.8931ZM16.4936 11.8824C16.3001 11.8824 16.1109 11.825 15.9501 11.7175C15.7892 11.61 15.6638 11.4572 15.5898 11.2785C15.5157 11.0997 15.4963 10.903 15.5341 10.7133C15.5718 10.5235 15.665 10.3492 15.8018 10.2124C15.9386 10.0756 16.1129 9.98241 16.3027 9.94467C16.4925 9.90692 16.6892 9.92629 16.8679 10.0003C17.0467 10.0744 17.1995 10.1998 17.307 10.3606C17.4144 10.5215 17.4718 10.7107 17.4718 10.9041C17.4718 11.1636 17.3688 11.4124 17.1853 11.5959C17.0018 11.7793 16.753 11.8824 16.4936 11.8824Z' /%3e%3c/svg%3e ")`
const getShipIcon = (isSelected) => `url("data:image/svg+xml;charset=UTF-8,%3csvg width='24' height='25' viewBox='0 0 24 25' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' fill='${isSelected ? 'white' : '%23757575'}' d='M13.8255 1.47079L14.2127 3.31697L12.056 2.70642L9.89923 3.31697L10.2864 1.47079H13.8255ZM20.2284 22.3133C20.6041 22.3133 20.8094 22.1497 21.1692 21.8356C21.5751 21.4813 22.0804 21.0404 22.9713 21.0404V22.2123C22.5206 22.2123 22.2773 22.4244 21.9405 22.7181L21.9405 22.7181L21.9405 22.7181L21.94 22.7185C21.5488 23.0603 21.0618 23.4852 20.2291 23.4852C19.4064 23.4852 18.9717 23.0717 18.6224 22.7394C18.3009 22.4333 18.0686 22.2123 17.4864 22.2123C16.8848 22.2123 16.6356 22.4427 16.2911 22.7619C15.9428 23.0842 15.5085 23.4852 14.7426 23.4852C13.9767 23.4852 13.551 23.0856 13.2093 22.7642C13.0251 22.591 12.8683 22.4441 12.6651 22.3452V10.7778L21.9698 13.393L18.9206 21.4602C19.1214 21.5977 19.2813 21.7494 19.4222 21.8832L19.4296 21.8903C19.7378 22.1837 19.8885 22.3133 20.2284 22.3133ZM14.8942 17.3467C15.2203 17.5646 15.6036 17.6809 15.9958 17.6809C16.2562 17.6809 16.514 17.6296 16.7546 17.5299C16.9952 17.4303 17.2137 17.2842 17.3979 17.1001C17.582 16.916 17.728 16.6974 17.8277 16.4569C17.9273 16.2163 17.9786 15.9585 17.9786 15.6981C17.9786 15.3059 17.8623 14.9225 17.6445 14.5965C17.4266 14.2704 17.1169 14.0163 16.7546 13.8662C16.3923 13.7161 15.9936 13.6768 15.609 13.7534C15.2243 13.8299 14.871 14.0187 14.5937 14.296C14.3164 14.5733 14.1276 14.9266 14.0511 15.3112C13.9746 15.6959 14.0138 16.0945 14.1639 16.4569C14.314 16.8192 14.5681 17.1288 14.8942 17.3467ZM16.4472 16.1494C16.6966 15.9001 16.6966 15.4959 16.4472 15.2466C16.1979 14.9973 15.7937 14.9973 15.5443 15.2466C15.295 15.4959 15.295 15.9001 15.5443 16.1494C15.7937 16.3987 16.1979 16.3987 16.4472 16.1494ZM8.45613 15.2467C8.70545 15.496 8.70545 15.9002 8.45613 16.1495C8.2068 16.3989 7.80257 16.3989 7.55325 16.1495C7.30392 15.9002 7.30392 15.496 7.55325 15.2467C7.80257 14.9974 8.20681 14.9974 8.45613 15.2467ZM4.52459 21.9015L4.52457 21.9015L4.5243 21.9017C4.21609 22.1872 4.06727 22.3133 3.77195 22.3133C3.48227 22.3133 3.33859 22.1898 3.04094 21.9102C2.65047 21.5431 2.11539 21.0404 1.0293 21.0404V22.2123C1.64918 22.2123 1.89497 22.4424 2.23551 22.7613L2.23867 22.7642L2.2425 22.7678C2.58403 23.0876 3.00863 23.4852 3.77195 23.4852C4.53813 23.4852 4.97219 23.0842 5.32047 22.7619C5.665 22.4427 5.91414 22.2123 6.51461 22.2123C7.09703 22.2123 7.3293 22.4333 7.65086 22.7394C8.00008 23.0717 8.43484 23.4852 9.2575 23.4852C10.0902 23.4852 10.5773 23.0602 10.9684 22.7185C11.0847 22.6127 11.207 22.5137 11.3348 22.422V10.8088L2.1407 13.393L5.16508 21.3943C4.90132 21.5531 4.69866 21.7405 4.52459 21.9015ZM8.00453 13.7152C8.39669 13.7152 8.78005 13.8315 9.10612 14.0494C9.4322 14.2673 9.68634 14.577 9.83641 14.9393C9.98649 15.3016 10.0258 15.7003 9.94925 16.0849C9.87274 16.4695 9.68389 16.8228 9.40659 17.1001C9.12929 17.3774 8.77599 17.5663 8.39136 17.6428C8.00673 17.7193 7.60805 17.68 7.24574 17.5299C6.88343 17.3799 6.57376 17.1257 6.35588 16.7997C6.13801 16.4736 6.02172 16.0902 6.02172 15.6981C6.02172 15.4377 6.07301 15.1798 6.17265 14.9393C6.2723 14.6987 6.41835 14.4801 6.60247 14.296C6.78659 14.1119 7.00518 13.9658 7.24574 13.8662C7.48631 13.7665 7.74414 13.7152 8.00453 13.7152ZM12.0559 4.0658L17.8933 5.71814L18.6433 11.086L12.0559 9.22111L5.46857 11.0853L6.21857 5.71814L12.0559 4.0658ZM12.0559 7.36251L14.8731 8.15939L15.2209 6.92986L12.0568 6.03455L8.89279 6.92986L9.23872 8.15939L12.0559 7.36251Z' /%3e%3c/svg%3e ")`
const getTrainIcon = (isSelected) => `url("data:image/svg+xml;charset=UTF-8,%3csvg width='24' height='25' viewBox='0 0 24 25' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' fill='${isSelected ? 'white' : '%23757575'}' d='M18.9902 5.34669C18.9899 4.82364 18.8057 4.31736 18.4697 3.91648C18.1338 3.51559 17.6675 3.24566 17.1526 3.15392L16.5619 3.01839C15.0605 2.67394 13.5249 2.50008 11.9845 2.50009C10.4439 2.50007 8.90834 2.67393 7.40681 3.01839L6.81617 3.15392C6.30124 3.24566 5.83497 3.51559 5.49901 3.91648C5.16305 4.31736 4.9788 4.82364 4.97852 5.34669V7.2152H18.9902V5.34669ZM14.8934 6.05754H9.07468C8.9906 6.05908 8.90705 6.04385 8.82891 6.01274C8.75078 5.98162 8.67963 5.93525 8.61962 5.87633C8.55961 5.81741 8.51194 5.74712 8.4794 5.66957C8.44686 5.59202 8.4301 5.50877 8.4301 5.42467C8.4301 5.34056 8.44686 5.25731 8.4794 5.17976C8.51194 5.10221 8.55961 5.03192 8.61962 4.973C8.67963 4.91408 8.75078 4.86771 8.82891 4.83659C8.90705 4.80548 8.9906 4.79025 9.07468 4.79179H14.8934C14.9775 4.79025 15.061 4.80548 15.1392 4.83659C15.2173 4.86771 15.2885 4.91408 15.3485 4.973C15.4085 5.03192 15.4562 5.10221 15.4887 5.17976C15.5212 5.25731 15.538 5.34056 15.538 5.42467C15.538 5.50877 15.5212 5.59202 15.4887 5.66957C15.4562 5.74712 15.4085 5.81741 15.3485 5.87633C15.2885 5.93525 15.2173 5.98162 15.1392 6.01274C15.061 6.04385 14.9775 6.05908 14.8934 6.05754ZM19.0211 8.45488H4.98893V13.1842H19.0211V8.45488ZM18.534 18.504C18.2224 18.8154 17.7999 18.9903 17.3594 18.9903H16.3694L19.0211 21.642L18.1632 22.4999L17.0713 21.408H6.93893L5.84702 22.4999L4.98893 21.642L7.64064 18.9914H6.65064C6.43242 18.9914 6.21634 18.9484 6.01473 18.8649C5.81312 18.7814 5.62994 18.659 5.47563 18.5047C5.164 18.1931 4.98893 17.7704 4.98893 17.3297V14.485H19.0211V17.3297C19.0208 17.7702 18.8456 18.1926 18.534 18.504ZM16.2479 15.6481C16.0724 15.5308 15.866 15.4682 15.6549 15.4682C15.3718 15.4682 15.1003 15.5807 14.9001 15.7809C14.6999 15.981 14.5875 16.2526 14.5875 16.5357C14.5875 16.7468 14.6501 16.9532 14.7674 17.1287C14.8846 17.3042 15.0514 17.4411 15.2464 17.5218C15.4415 17.6026 15.6561 17.6238 15.8631 17.5826C16.0702 17.5414 16.2604 17.4397 16.4097 17.2905C16.559 17.1412 16.6606 16.951 16.7018 16.7439C16.743 16.5368 16.7219 16.3222 16.6411 16.1272C16.5603 15.9321 16.4235 15.7654 16.2479 15.6481ZM7.46745 15.9426C7.35018 16.1181 7.28762 16.3245 7.28766 16.5357C7.28771 16.8187 7.4002 17.0902 7.60038 17.2903C7.80056 17.4905 8.07204 17.6029 8.35511 17.6029C8.56624 17.6029 8.77262 17.5403 8.94817 17.423C9.12372 17.3057 9.26053 17.139 9.34132 16.9439C9.42211 16.7488 9.44323 16.5342 9.40203 16.3271C9.36082 16.12 9.25914 15.9298 9.10983 15.7806C8.96052 15.6313 8.7703 15.5296 8.56322 15.4885C8.35615 15.4473 8.14151 15.4685 7.94646 15.5493C7.75142 15.6301 7.58472 15.767 7.46745 15.9426ZM8.15213 20.1952H15.8579L14.6545 18.991H9.3566L8.15213 20.1952Z' /%3e%3c/svg%3e ")`

const SegmentButtonPopover = (props) => {
  const [ isSelected, changeSelected ] = useState(false)

  let backgroundImage

  switch (props.segmentType) {
    case BY_RAILROAD:
      backgroundImage = getTrainIcon(isSelected)
      break
    case BY_SHIPS:
      backgroundImage = getShipIcon(isSelected)
      break
    default:
      backgroundImage = getTruckIcon(isSelected)
  }

  const triggerStyle = isSelected ? {
    backgroundColor: '#878C95',
    backgroundImage,
  } : { backgroundImage }

  return (
    <div className={'segment-blocks-icon'} >
      <Popover placement='left' trigger='click' { ...props } onVisibleChange={changeSelected} >
        <div className={'vehicle-icon'} style={triggerStyle}/>
      </Popover>
    </div>
  )
}

SegmentButtonPopover.propTypes = {
  segmentType: PropTypes.number.isRequired,
}

export default SegmentButtonPopover
